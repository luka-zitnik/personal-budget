<!DOCTYPE html>
<html>
    <head>
        <title>Daily Expenses</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            html, body {
                margin: 0px;
                padding: 0px;
                font-size: 10px;
                background-color: #FFF;
            }
            article {
                position: fixed;
                top: 0;
                left: 0;
                height: 100%;
                width: 100%;
                z-index: 101;
                transition: top 0.3s ease-in;
                background-color: #FFF;
            }
            article[aria-hidden=true] {
                top: 100%;
            }
            article form[data-type="add"] {
                margin: 1rem;
            }
            ul {
                padding: 0;
                margin: 1rem;
                list-style: outside none none;
            }
            form[role=dialog] {
                z-index: 101 !important;
            }
            input[type="date"] {
                box-shadow: none;
            }
            form[role="dialog"][data-type="action"] section {
                overflow: auto;
            }
            section[role="region"] > header:first-child a,
            section[role="region"] > header:first-child button {
                min-width: 0 !important;
            }
            input {
                -moz-box-sizing: border-box;
                box-sizing: border-box;
            }
            #no-expenses {
                text-align: left;
            }
            #no-expenses .info {
                border-top: 0.1rem solid rgba(96, 96, 96, 0.5);
                color: #606060;
                font-size: 2rem;
                font-weight: lighter;
                margin: 15rem 2rem 0px;
            }
            #no-expenses .info p {
                margin: 1rem;
            }
            #no-expenses p.small {
                font-size: 1.6rem;
            }
        </style>
        <link rel="stylesheet" href="library/bb-69a6e9c/style/headers.css" />
        <link rel="stylesheet" href="library/bb-69a6e9c/style/lists.css" />
        <link rel="stylesheet" href="library/bb-69a6e9c/style/input_areas.css" />
        <link rel="stylesheet" href="library/bb-69a6e9c/style/buttons.css" />
        <link rel="stylesheet" href="library/bb-69a6e9c/style/action_menu.css" />
        <link rel="stylesheet" href="library/bb-69a6e9c/style/value_selector.css" />
        <link rel="stylesheet" href="library/bb-69a6e9c/style/edit_mode.css" />
        <link rel="stylesheet" href="library/bb-69a6e9c/style/switches.css" />
        <link rel="stylesheet" href="library/bb-69a6e9c/style/confirm.css" />
        <script src="scripts/store.js" defer></script>
        <script src="scripts/placefinder.js" defer></script>
        <script src="scripts/currency.js" defer></script>
        <script src="library/underscore-1.7.0.js" defer></script>
        <script src="library/knockout-3.2.0.js" defer></script>
        <script src="scripts/viewmodels/options.js" defer></script>
        <script src="scripts/viewmodels/addExpense.js" defer></script>
        <script src="scripts/viewmodels/currencySuggestion.js" defer></script>
        <script src="scripts/viewmodels/currencySelector.js" defer></script>
        <script src="scripts/viewmodels/DailySum.js" defer></script>
        <script src="scripts/viewmodels/DailyExpenses.js" defer></script>
        <script src="scripts/viewmodels/monthlyExpenses.js" defer></script>
        <script src="scripts/viewmodels/Expense.js" defer></script>
        <script src="scripts/viewmodels/dailyList.js" defer></script>
        <script src="scripts/app.js" defer></script>
    </head>
    <body role="application">
        <section role="region" id="monthly-list">
            <header>
                <menu type="toolbar">
                    <a data-bind="click: addExpense.open.bind(addExpense)">
                        <span class="icon icon-add">Add</span>
                    </a>
                    <a data-bind="click: options.open.bind(options)">
                        <span class="icon icon-options">Options</span>
                    </a>
                </menu>
                <h1>Daily Expenses</h1>
            </header>
            <header>
                <h2>
                    Your budget total is
                    <strong data-bind="text: currencyCode"></strong>
                    <strong data-bind="text: remaining().toFixed(2)"></strong>.
                </h2>
            </header>
            <section data-type="list" data-bind="foreach: monthlyExpensesList">
                <header>
                    <aside class="pack-end">
                        <span data-bind="text: $root.currencyCode"></span>
                        <span data-bind="text: monthlySum().toFixed(2)"></span>
                    </aside>
                    <span data-bind="text: month"></span>
                </header>
                <ul data-bind="foreach: dailyExpensesList">
                    <li>
                        <a data-bind="click: openDailyList">
                            <aside class="pack-end">
                                <p>
                                    <span data-bind="text: $root.currencyCode"></span>
                                    <span data-bind="text: dailySum().toFixed(2)"></span>
                                </p>
                            </aside>
                            <p data-bind="text: date"></p>
                        </a>
                    </li>
                </ul>
            </section>
            <section data-bind="visible: welcomeIsVisible">
                <div id="no-expenses">
                    <div class="info">
                        <p>No expenses</p>
                        <p class="small">
                            You can start by recording today's expenses or
                            limiting your expenses from this point onward.
                        </p>
                    </div>
                </div>
            </section>
        </section>
        <article aria-hidden="true" id="add-expense-view">
            <section role="region">
                <header>
                    <a data-bind="click: close">
                        <span class="icon icon-back">Back</span>
                    </a>
                    <h1>Add Expense</h1>
                </header>
            </section>
            <section>
                <form data-type="add" data-bind="submit: addExpense">
                    <p>
                        <input data-bind="value: label" type="text" required="" placeholder="Label">
                        <button type="reset"></button>
                    </p>
                    <p>
                        <input data-bind="value: amount" type="number" step="0.01" required="" placeholder="0.00">
                        <button type="reset"></button>
                    </p>
                    <p>
                        <input data-bind="textInput: date" type="date" required="" pattern="\d{4}-\d{2}-\d{2}" placeholder="YYYY-MM-DD">
                    </p>
                    <p>
                        <button>Add</button>
                    </p>
                </form>
            </section>
        </article>
        <div id="options">
            <article aria-hidden="true" id="options-view">
                <section role="region">
                    <header>
                        <a data-bind="click: close">
                            <span class="icon icon-back">Back</span>
                        </a>
                        <h1>Options</h1>
                    </header>
                    <section>
                        <header>
                            <h2>Currency</h2>
                        </header>
                        <ul>
                            <li>
                                <button type="button" class="icon icon-dialog" data-bind="text: currencyCode, click: openCurrencySelector"></button>
                            </li>
                            <li>
                        </ul>
                        <header>
                            <h2>Budget</h2>
                        </header>
                        <ul>
                            <li>
                                <input data-bind="textInput: budgetStartDate" type="date" pattern="\d{4}-\d{2}-\d{2}" placeholder="YYYY-MM-DD">
                            </li>
                            <li>
                                <input data-bind="textInput: budgetAmount" type="number" step="0.01" pattern="\d*\.\d{0,2}" placeholder="0.00">
                            </li>
                        </ul>
                    </section>
                </section>
            </article>
            <div data-bind="template: { name: 'options-invalid-template', data: invalidBudgetStartDateConfirm, if: invalidBudgetStartDateConfirm.visible }"></div>
            <div data-bind="template: { name: 'options-invalid-template', data: invalidBudgetAmountConfirm, if: invalidBudgetAmountConfirm.visible }"></div>
        </div>
        <script type="text/html" id="options-invalid-template">
            <form data-type="confirm" role="dialog" data-bind="submit: fix">
                <section>
                    <h1 data-bind="text: heading"></h1>
                    <p data-bind="text: message"></p>
                </section>
                <menu>
                    <button type="button" data-bind="click: reset">Whatever</button>
                    <button class="recommend">Let me fix it</button>
                </menu>
            </form>
        </script>
        <article aria-hidden="true" id="daily-list-view">
            <section role="region">
                <header>
                    <a data-bind="click: close">
                        <span class="icon icon-back">Back</span>
                    </a>
                    <menu type="toolbar">
                        <a data-bind="click: function(){state('edit');}">
                            <span class="icon icon-edit">Edit</span>
                        </a>
                    </menu>
                    <h1 data-bind="text: date"></h1>
                </header>
            </section>
            <section data-type="list">
                <ul data-bind="foreach: expensesList, attr: {'data-type': state}">
                    <li>
                        <label class="pack-checkbox danger">
                            <input type="checkbox" data-bind="checked: markedForDeletion"/>
                            <span></span>
                        </label>
                        <aside class="pack-end">
                            <p>
                                <span data-bind="text: monthlyExpenses.currencyCode"></span>
                                <span data-bind="text: amount().toFixed(2)"></span>
                            </p>
                        </aside>
                        <p data-bind="text: label"></p>
                    </li>
                </ul>
            </section>
            <form data-type="edit" role="dialog" data-bind="visible: state() === 'edit'">
                <section role="region">
                    <header>
                        <a data-bind="click: function(){state('list');}">
                            <span class="icon icon-close">Close</span>
                        </a>
                        <menu type="toolbar">
                            <a data-bind="click: deleteExpenses">Delete</a>
                        </menu>
                        <h1 data-bind="text: date"></h1>
                    </header>
                </section>
            </form>
        </article>
        <form data-type="action" role="dialog" id="currency-suggest-dialog" data-bind="visible: visible">
            <header>
                <h1>Set Currency</h1>
            </header>
            <section>
                <p>
                    Do you want to use "<span data-bind="text: suggestedCurrency"></span>"
                    as your currency for this app?
                </p>
            </section>
            <menu>
                <button type="button" data-bind="click: useSuggested"class="full recommend">Yes</button>
                <button type="button" data-bind="click: chooseAnother" class="full">Let me choose a different currency</button>
                <button type="button" data-bind="click: close" class="full">Not now</button>
            </menu>
        </form>
        <div class="value-selector"><!-- value-selector class smells like it will be discarded soon -->
            <form data-type="value-selector" role="dialog" id="currency-select-dialog" data-bind="visible: visible">
                <section class="scrollable">
                    <h1>Select Currency</h1>
                    <ol role="listbox" data-bind="foreach: currenciesList">
                        <li role="option" data-bind="attr: { 'aria-selected': $data === $parent.selected() }">
                            <label role="presentation" data-bind="click: $parent.select.bind($parent, $data)">
                                <span data-bind="text: $data"></span>
                            </label>
                        </li>
                    </ol>
                </section>
                <menu class="value-selector-buttons">
                    <button class="affirmative" data-bind="click: ok">OK</button>
                    <button data-bind="click: close">Cancel</button>
                </menu>
            </form>
        </div>
    </body>
</html>
